{% extends "base.html" %}

{% block title %}TwÃ³j plan dla: {{ plan.query.city }}{% endblock %}

{% block content %}
<div class="container plan-results">
    
    <header class="plan-header">
        <h1>Plan podrÃ³Å¼y: {{ plan.query.city }}</h1>
        <p class="subtitle">
            <span class="badge days-badge">{{ plan.query.days }} dni</span>
            <span class="badge style-badge">{{ plan.query.style }}</span>
        </p>
    </header>

    <div class="info-grid">
        
        <div class="card weather-card">
            <h2><span class="icon">â˜€ï¸</span> Pogoda</h2>
            <div class="weather-details">
                {% if plan.weather.daily is defined %}
                <div class="daily-weather-list">
                    {% for day in plan.weather.daily %}
                    <div class="daily-item card">
                        <h3>{{ day.date_label or day.date }}</h3>
                        <p><strong><span class="weather-icon">{{ day.icon or '' }}</span> {{ day.opis or 'Brak danych' }}</strong></p>
                        <p>Min / Max: <strong>{% if day.temperatura_min is defined %}{{ day.temperatura_min }}Â°C{% else %}-{% endif %}</strong> / <strong>{% if day.temperatura_max is defined %}{{ day.temperatura_max }}Â°C{% else %}-{% endif %}</strong></p>
                        {% if day.opad_mm is defined %}
                        <p>Opad: <strong>{{ day.opad_mm }} mm</strong></p>
                        {% endif %}
                        {% if day.wiatr_kmh is defined %}
                        <p>Wiatr: <strong>{{ day.wiatr_kmh }} km/h</strong></p>
                        {% endif %}
                    </div>
                    {% endfor %}
                </div>
                {% else %}
                <p>Åšrednia temperatura: <strong>{{ plan.weather.temperatura }}Â°C</strong></p>
                {% if plan.weather.temperatura_min is defined and plan.weather.temperatura_max is defined %}
                <p>Min / Max: <strong>{{ plan.weather.temperatura_min }}Â°C</strong> / <strong>{{ plan.weather.temperatura_max }}Â°C</strong></p>
                {% endif %}
                {% if plan.weather.wilgotnosc is defined %}
                <p>WilgotnoÅ›Ä‡: <strong>{{ plan.weather.wilgotnosc }}%</strong></p>
                {% endif %}
                <p>Warunki: {{ plan.weather.opis }}</p>
                {% if plan.weather.wiatr_kmh is defined %}
                <p>PrÄ™dkoÅ›Ä‡ wiatru: {{ plan.weather.wiatr_kmh }} km/h</p>
                {% endif %}
                {% endif %}
            </div>
        </div>
        
        <div class="card budget-card">
            <h2><span class="icon">ğŸ’°</span> Szacowany budÅ¼et</h2>
            {% if plan.cost.total_pln is not none %}
                <p class="main-cost">CaÅ‚kowity koszt: <strong>{{ plan.cost.total_pln }} PLN</strong></p>
                <p>Koszt w walucie lokalnej: {{ plan.cost.total_local }} {{ plan.cost.currency }}</p>
            {% else %}
                <p class="info-note">Dla tego miasta nie mamy jeszcze danych o szacunkowych kosztach.</p>
            {% endif %}
        </div>
    </div>
    
    <div class="attractions-section">
        <h2><span class="icon">ğŸ›ï¸</span> GÅ‚Ã³wne atrakcje</h2>
        <ul class="attraction-list">
            {% for attraction in plan.attractions %}
            <li class="attraction-item">{{ attraction.name }}</li>
            {% endfor %}
        </ul>
    </div>

    <div class="action-buttons">
        <button class="btn btn-secondary"><span class="icon">ğŸ“„</span> Pobierz jako PDF</button>
    </div>
</div>
{% endblock %}